<h2>My Profile</h2>


<div>
  <hr>
  <br>
  <% if user_signed_in? %>
    <br>
    <br> <%= "Name: " %> <%= current_user.first_name %> <%= current_user.last_name %>
    <br> <%= "Birth Date: " %> <%= current_user.dob %>
    <br> <%= "Gender: " %> <%= current_user.gender %>
    <br> <%= "Province: " %> <%= current_user.province %>
    <br> <%= "City or Village: " %> <%= current_user.city_village %>
    <br> <%= "Address Line 1: " %> <%= current_user.address_line_1 %>
    <br> <%= "Contact: " %> <%= current_user.contact %>

    <% if current_user.role_id == 3 %>
      <br> <h3>Appointments</h3>
      <table>
        <thead>
        <tr>
          <th>Appointment ID</th>
          <th>Provider</th>
          <th>Appointment Date</th>
          <th colspan="3"></th>
        </tr>
        </thead>

        <tbody>
        <% get_appointments.each do |appt| %>
          <tr>
            <td><%= appt.id %></td>
            <td><%= appt.doctor.first_name + ' ' + appt.doctor.last_name %></td>
            <td><%= appt.appointment_date %></td>
          </tr>
        <% end %>
        </tbody>
      </table>
    <% end %>

    <% if current_user.role_id == 2 %>
      <br> <h3>Patients</h3>
      <table>
        <thead>
        <tr>
          <th>Appointment ID</th>
          <th>Patient</th>
          <th>Appointment Date</th>
          <th colspan="3"></th>
        </tr>
        </thead>

        <tbody>
        <% get_patients.each do |appt| %>
          <tr>
            <td><%= appt.id %></td>
            <td><%= appt.patient.first_name + ' ' + appt.patient.last_name %></td>
            <td><%= appt.appointment_date %></td>
          </tr>
        <% end %>
        </tbody>
      </table>
    <% end %>

    <% if current_user.role_id == 3 %>
      <br> <h3>Tests</h3>
      <table>
        <thead>
        <tr>
          <th>Test ID</th>
          <th>Test Date</th>
          <th colspan="3"></th>
        </tr>
        </thead>

        <tbody>
        <% get_tests.each do |test| %>
          <tr>
            <td><%= link_to test.id , patient_test_path(@user.actable_id, test) %></td>
            <td><%= test.test_date %></td>
          </tr>
        <% end %>
        </tbody>
      </table>
    <% end %>

  <% end %>
  <br>
</div>